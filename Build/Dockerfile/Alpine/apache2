# Image System
FROM alpine

# Build Argument
ARG USER_NAME=marc
ARG USER_ID=1000
ARG GROUP_ID=1000

# Mise a jour
RUN apk --no-cache upgrade

# Installation du serveur Web
RUN apk add --no-cache apache2

# Installation de PHP
RUN apk add --no-cache php

# Creation du group et utilisateur
RUN addgroup -g $GROUP_ID $USER_NAME
RUN adduser -h /home/$USER_NAME -s /bin/ash -G $USER_NAME -D -u $USER_ID $USER_NAME

# Permission
RUN mkdir -p /var/www/logs
RUN chown -R marc:marc /usr/sbin/httpd
RUN chown -R marc:marc /var/www

# Port applicatif
EXPOSE 80

# Volume
#VOLUME /var/www/html

# WorkDir
#WORKDIR /var/www/html

# Commande
ENTRYPOINT ["/usr/sbin/httpd"]

# Argument
CMD ["-D","FOREGROUND"]

# Utilisateur du conteneur
USER marc
