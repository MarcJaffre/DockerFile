FROM alpine:latest
RUN apk add --no-cache systemd systemd-udev systemd-libs dbus
RUN sed -i 's/^#PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config
RUN echo "init=/lib/systemd/systemd" >> /etc/default/cmdline
EXPOSE 80
WORKDIR /root
COPY myservice.service /etc/systemd/system/
RUN systemctl enable myservice.service
RUN systemctl start myservice.service
CMD ["/lib/systemd/systemd"]
